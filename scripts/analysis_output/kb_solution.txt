
基于Parquet数据格式的知识库构建方案

【数据特点】
1. 格式: Question-Answer对
   - question: str, 英文问题
   - answer: numpy.ndarray, 包含1个或多个答案实体
   
2. 数据规模:
   - 训练集: 87,925 条
   - 验证集: 需要检查
   
3. 问题类型: Who/What/Where/When/Which/How 等

4. 答案特点:
   - 主要是实体名称（人名、地名、日期、组织名等）
   - 部分问题有多个答案
   - 英文内容为主

【知识库构建方案】

方案1: 基于问答对的知识库
├── 数据预处理
│   ├── 将每条QA对作为独立文档
│   ├── 提取问题关键词和实体答案
│   └── 构建 (问题, 答案) 映射
├── 向量知识库
│   ├── 将问题文本向量化存储
│   ├── 用于相似问题检索
│   └── FAISS索引
├── 关键词知识库
│   ├── 提取问题中的关键词
│   └── BM25索引
└── 知识图谱
    ├── 实体节点: 答案实体
    ├── 关系类型: QA关联
    └── 边: 问题->实体

方案2: 基于实体的知识库
├── 实体收集
│   ├── 提取所有答案实体
│   ├── 去重并建立实体ID
│   └── 构建实体类型分类
├── 实体百科库
│   ├── 每个实体关联其出现的问题
│   └── 存储问题上下文
├── 向量索引
│   ├── 实体名称向量化
│   └── 实体描述向量化
└── 反向索引
    ├── 从问题到实体的映射
    └── 从实体到问题的映射

方案3: 增强型知识库（推荐）
├── 核心知识图谱
│   ├── 节点: 问题实体 + 答案实体
│   ├── 问题实体 -> (关联) -> 答案实体
│   └── 支持多跳推理
├── 向量索引层
│   ├── 问题文本向量
│   └── 实体描述向量
├── 上下文记忆
│   ├── 存储问题-答案对
│   └── 用于答案生成
└── 检索流程
    1. 问题向量化检索
    2. 关键词检索
    3. 知识图谱路径检索
    4. 多路结果融合
    5. 答案生成

【实施步骤】

Step 1: 数据预处理
    ├── 解析parquet文件
    ├── 清洗文本（去除特殊字符）
    └── 保存为JSON格式

Step 2: 构建向量知识库
    ├── 使用BGE模型向量化问题
    └── FAISS索引

Step 3: 构建关键词知识库
    ├── 提取问题关键词
    └── BM25索引

Step 4: 构建知识图谱
    ├── 实体抽取（答案）
    ├── 关系构建（QA对）
    └── NetworkX存储

Step 5: 集成检索系统
    ├── 多路召回
    ├── 结果重排
    └── 答案生成

【技术选型建议】
- 嵌入模型: BAAI/bge-large-en-v1.5 (英文)
- 重排模型: BAAI/bge-reranker-large
- 向量库: FAISS
- 关键词检索: BM25 (jieba分词/英文nltk)
- 知识图谱: NetworkX + GraphML
